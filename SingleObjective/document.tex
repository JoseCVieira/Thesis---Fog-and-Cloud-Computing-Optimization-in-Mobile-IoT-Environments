\documentclass{article}
\usepackage[legalpaper, margin=1in]{geometry}

\usepackage[utf8]{inputenc}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}

\begin{document}
\newcommand{\SubItem}[1]{
    {\setlength\itemindent{15pt} \item[-] #1}
}

\pagebreak
\noindent\textbf{Single-objective Optimization}\\[12pt]
\noindent\textbf{Notations:}
\begin{itemize}
	\item $N~-$ number of nodes
	\item $M~-$ number of modules
	\item $K~-$ number of dependencies
	\item $Z~-$ number of dependencies between different pairs of modules
	\item $Q~-$ number of loop deadlines\\
	
	\item $P^{Mips}~-$ matrix $1\times N$ representing the MIPS price of each fog node per unit
	\item $P^{Ram}~-$ matrix $1\times N$ representing the memory price of each fog node per unit
	\item $P^{Strg}~-$ matrix $1\times N$ representing the storage price of each fog node per unit
	\item $P^{Bw}~-$ matrix $1\times N$ representing the bandwidth price of each fog node per unit
	\item $P^{En}~-$ matrix $1\times N$ representing the energy price of each fog node per unit\\
	
	\item $f^{Mips}~-$ matrix $N\times 1$ representing the MIPS capacity of each fog node
	\item $f^{Ram}~-$ matrix $N\times 1$ representing the memory capacity of each fog node
	\item $f^{Strg}~-$ matrix $N\times 1$ representing the storage capacity of each fog node
	\item $f^{bPw}=$ matrix $N\times 1$ representing the busy power consumption of each fog node per unit
	\item $f^{iPw}~-$ matrix $N\times 1$ representing the idle power consumption of each fog node per unit
	\item $f^{Tx}~-$ matrix $N\times 1$ representing the transmitter power ($f^{Tx}_n$ is non 0 if $n$ is a mobile node)\\
	
	\item $m^{Mips}~-$ matrix $M\times 1$ representing the MIPS needed for each application's module
	\item $m^{Ram}~-$ matrix $M\times 1$ representing the memory needed for each application's module
	\item $m^{Strg}~-$ matrix $M\times 1$ representing the storage needed for each application's module\\
	
	\item $e^{Cpu}~-$ matrix $1\times K$ representing the tuple CPU size (MI) needed to be processed
	\item $e^{Nw}~-$ matrix $1\times K$ representing the tuple network size (MB) needed to be sent
	\item $e^{Prob}~-$ matrix $1\times K$ representing the probability of sending the tuple
	\item $e^{Pe}~-$ matrix $1\times K$ representing the periodicity of the producer (i.e., periodic sources)
	\item $e^{S}~-$ matrix $1\times K$ representing the edge source
	\item $e^{D}~-$ matrix $1\times K$ representing the edge destination\\
	
	\item $l^S~-$ matrix $N\times 1$ representing the starting nodes of each pair of modules
	\item $l^D~-$ matrix $N\times 1$ representing the ending nodes of each pair of modules\\
	
	\item $mD~-$ matrix $M\times M$ representing the dependencies between modules
	\item $mB~-$ matrix $M\times M$ representing the bandwidth needed between modules\\
	
	\item $f^L~-$ matrix $N\times N$ representing the latency between each two nodes
	\item $f^B~-$ matrix $N\times N$ representing the bandwidth between each two nodes
	
	\item $D~-$ matrix $N\times M$ representing the nodes where each module can be deployed
	\item $C~-$ matrix $N\times M$ current module placement\\
	
	\item $A^L~-$ matrix $Q\times M$ representing the loop module list
	\item $A^D~-$ matrix $Q\times 1$ representing the loop deadline list\\
	
	\item $t^{Boot}~-$ constant representing the average virtual machine boot time
	\item $t^{Min}~-$ constant representing the minimum time interval between events
	\item $b~-$ constant representing the percentage of bandwidth used for periodic tuples
\end{itemize}

\pagebreak
\noindent\textbf{Variables:}
\begin{itemize}
	\item $P~-$ matrix $N\times M$ representing the placement mapping between modules and nodes
	\item $R~-$ matrix $Z\times N\times N$ representing the tuple routing map between modules
	\item $V~-$ matrix $M\times N\times N$ representing the VM routing map
\end{itemize}
\vspace*{12pt}

\noindent\textbf{Preliminary computations:}\\[6pt]
\begin{equation*}
\begin{split}
& m^{Mips}_{i} = \sum_{k\in K} \left(\frac{e^{Prob}_k e^{Cpu}_k}{e^{Pe}_k}\right), e_k^{D} = i\\[6pt]
& mB_{i,j}= \sum_{k\in K} \left(\frac{e^{Prob}_k e^{Nw}_k}{e^{Pe}_k}\right), e^{S}_k = i,~e^{D}_k = j\\[6pt]
& mD_{i,j}= \sum_{k\in K} \left(\frac{e^{Prob}_k}{e^{Pe}_k}\right), e^{S}_k = i,~e^{D}_k = j
\end{split}
\end{equation*}\\[6pt]

\noindent\textbf{Problem formulation:}\\[12pt]
\noindent\textbf{Operational Cost} ($C_O$)\\[6pt]
\begin{equation*}
\begin{aligned}
	C_O = & P^{Mips} \times P \times m^{Mips} + P^{Ram} \times P \times m^{Ram} + P^{Strg}\times P\times m^{Strg} + \left(P^{Bw} \sum_{z\in Z} mB_{l^S_z,l^D_z} \times R_z\right)e' + C_{Pw}^P + C_{Pw}^M~,\\
	& where~ :\\
	& C_{Pw}^P = \sum_{i\in N} P^{En}_i \left[ f_i^{iPw} + (f_i^{bPw} - f_i^{iPw}) \times\frac{P_i \times m^{Mips}}{f_i^{Mips}} + f^{Tx}_{i} \sum_{j\in N}\sum_{z\in Z} R_{z, i,j} \times \left(\frac{ mB_{l^S_z,l^D_z}}{f^B_{i,j}\times b} + f^L_{i,j} \right) \right] \\[10pt]
	& C_{Pw}^M = \sum_{i\in N} P^{En}_i~ f^{Tx}_i \sum_{j\in N}\sum_{z\in M} V_{z, i,j} \times \left(\frac{m^{Strg}_{z} + m^{Ram}_{z}}{f^B_{i,j} \times (1- b)}  + f^L_{i,j}\right)
	%% & C_{Pw} = \sum_{i\in N} P^{En}_i \left[ \left(f_i^{iPw} + (f_i^{bPw} - f_i^{iPw}) \times\frac{P_i \times m^{Mips}}{f_i^{Mips}}\right) + \sum_{j\in N} f^{Tx}_{i, j} \times  \frac{\sum_{z\in Z}\left( mB_{l^S_z,l^D_z} \times R_{z, i,j} + \left(m^{Strg}_{z} + \times m^{Ram}_{z}\right) \times V_{z, i,j} \right)}{f^B_{i,j}} \right]
\end{aligned}
\end{equation*}\\[6pt]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\pagebreak

\noindent\textbf{Final problem:}\\[6pt]
\begin{flalign*}
\begin{aligned}
& \underset{P, R}{\text{minimize}}
& & C_O\\
& \text{subject to}
& & P\times m^{Mips} \leq f^{Mips}, \\
&&& P\times m^{Ram} \leq f^{Ram}, \\
&&& P\times m^{Strg} \leq f^{Strg}, \\
&&& P\leq D\\
&&& P_{i,j} \in \{0, 1\},~ \forall i \in [0, N],~ \forall j \in [0, M]\\
&&& R_{z, i,j} \in \{0, 1\},~ \forall z \in [0, Z],~ \forall i \in [0, N],~ \forall j \in [0, N]\\
&&& V_{z, i,j} \in \{0, 1\},~ \forall z \in [0, M],~ \forall i \in [0, N],~ \forall j \in [0, N]\\
&&& \sum_{i \in N} P_{i,j} = 1,~ \forall j \in [0, M]\\
&&& \sum_{j\in N} R_{z, i, j} - \sum_{j\in N} R_{z, i, j}' = P_{i, l^S_z} - P_{i, l^D_z}~~, \forall z \in [0, Z],~ \forall i \in [0, N]\\
&&& \sum_{z\in Z} mB_{l^S_z,l^D_z} \times R_{z, i,j} \le f^B_{i,j} \times b ~~,~ \forall i \in [0, N],~ \forall j \in [0, N]\\
&&& \sum_{j\in N} V_{z, i, j} - \sum_{j\in N} V_{z, i, j}' = C_{j, i} - P_{j, i}~~,~ \forall z \in [0, M],~ \forall i \in [0, N]\\
&&& L^P_q + L^T_q + L^M_q < A^D_q,~ \forall q \in [0, Q]
\end{aligned}&&&
\end{flalign*}\\[6pt]

\begin{flalign*}
\begin{aligned}
& where:\\
& L^P_q = \sum_{i\in M} A^L_{q,i} \times \left(\frac{m^{Mips}_i}{\sum_{j\in N}\frac{f^{Mips}_j\times P_{j, i}}{\sum_{l\in M} P_{j, i} \times P_{j, l}}} + t^{Min}\right)
\end{aligned}&&&
\end{flalign*}

\begin{flalign*}
\begin{aligned}
L^T_q = \sum_{i=0}^{M-1}~ \sum_{j=i+1}^{M} A^L_{q,i}~ A^L_{q,j} & \sum_{l\in N}\sum_{k\in N} \left( fL_{l,k} \times R_{z,l,k} + \frac{mB_{l^S_z,l^D_z} \times R_{z,l,k}}{f^B_{l,k} \times b} \right),\\[6pt]
& i<j,\\
& \sum_{t=i+1}^{j-1} A^L_{q, t} = 0\\
& \sum_{t_2 \in N} R_{z, t_1, t_2} - \sum_{t_2\in N} R_{z, t_1, t_2}' = 1,~ t_1 = \sum_{t \in N}t \times P_{t, i},~ z \in Z \\
& \sum_{t_2 \in N} R_{z, t_1, t_2} - \sum_{t_2\in N} R_{z, t_1, t_2}' = -1,~ t_1 = \sum_{t \in N}t \times P_{t, j},~ z \in Z
\end{aligned}&&&
\end{flalign*}

\begin{flalign*}
\begin{aligned}
L^M_q = \sum_{i\in M} A^L_{q,i} \times & \left(\sum_{l\in N}\sum_{k\in N}\left( fL_{l,k} \times V_{z,l,k} + \frac{\left(m^{Strg}_{z} + \times m^{Ram}_{z}\right) \times V_{z,l,k}}{f^B_{l,k} \times (1-b)}\right) + t^{Boot}\right),\\[6pt]
& \sum_{t_2 \in N} V_{z, t_1, t_2} - \sum_{t_2\in N} V_{z, t_1, t_2}' = 1,~ t_1 = \sum_{t \in N}t \times C_{t, i},~ z \in M \\
& \sum_{t_2 \in N} V_{z, t_1, t_2} - \sum_{t_2\in N} V_{z, t_1, t_2}' = -1,~ t_1 = \sum_{t \in N}t \times P_{t, i},~ z \in M
\end{aligned}&&&
\end{flalign*}

\end{document}